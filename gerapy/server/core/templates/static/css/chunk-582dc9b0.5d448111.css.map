{"version":3,"sources":["webpack:///src/views/project/D:/GitWork/Scrapilot/gerapy/client/src/views/project/src/views/project/Web.vue","chunk-582dc9b0.5d448111.css","webpack:///src/views/project/D:/GitWork/Scrapilot/gerapy/client/src/views/project/D:/GitWork/Scrapilot/gerapy/client/src/views/project/Parser.vue","webpack:///src/components/D:/GitWork/Scrapilot/gerapy/client/src/components/D:/GitWork/Scrapilot/gerapy/client/src/components/CodeEditor.vue","webpack:///src/views/project/D:/GitWork/Scrapilot/gerapy/client/src/views/project/D:/GitWork/Scrapilot/gerapy/client/src/views/project/Configure.vue"],"names":[],"mappings":"AAmNA,6BACA,cCjNA,CCmYA,SACE,WAAA,CACA,wBAAA,CACA,WACE,cAAA,CACA,iBAAA,CACA,kBACE,gBAAA,CAEF,aACE,aAAA,CACA,eAAA,CAIF,0BACE,UAAA,CAOJ,iDAEE,wBAAA,CACA,iBAAA,CACA,gBALW,CAMX,mFACE,cAAA,CAIF,oCACE,+BAAA,CACA,yCACE,SAAA,CAEF,2CACE,SAAA,CAKJ,0CACE,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,gBAAA,CACA,eAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,+BAAA,CAKF,4BACE,wBAAA,CACA,gBAAA,CAIJ,sBACE,gBAAA,CACA,eAAA,CACA,wBAAA,CACA,YAAA,CAIJ,yBACE,uBAAA,CAGF,qBACE,kCAAA,CCvVF,aACE,cAAA,CACA,yBACE,gBAAA,CAEF,8BACE,WAAA,CACA,0BAAA,CCwPA,0GACE,iBAAA,CAKA,gDACE,eAAA,CAMR,QACE,oBAAA,CACA,cACE,yBAAA,CAEF,eACE,yBAAA,CAEF,aACE,yBAAA,CAIJ,MACE,cAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA","file":"chunk-582dc9b0.5d448111.css","sourcesContent":["<template>\r\n  <div>\r\n    <el-row class=\"m-b-sm\">\r\n      <el-col :span=\"3\">\r\n        <el-button type=\"primary\" size=\"mini\">XPath Selector</el-button>\r\n      </el-col>\r\n      <el-col :span=\"18\">\r\n        {{ xpathSelector }}\r\n      </el-col>\r\n      <el-col :span=\"1\">\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"mini\"\r\n          v-clipboard:copy=\"xpathSelector\"\r\n          v-clipboard:success=\"onCopy\"\r\n          v-clipboard:error=\"onError\"\r\n          >{{ $lang.buttons.copy }}\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row class=\"m-b-md\">\r\n      <el-col :span=\"3\">\r\n        <el-button type=\"primary\" size=\"mini\">CSS Selector</el-button>\r\n      </el-col>\r\n      <el-col :span=\"18\">\r\n        {{ cssSelector }}\r\n      </el-col>\r\n      <el-col :span=\"1\">\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"mini\"\r\n          v-clipboard:copy=\"cssSelector\"\r\n          v-clipboard:success=\"onCopy\"\r\n          v-clipboard:error=\"onError\"\r\n          >{{ $lang.buttons.copy }}\r\n        </el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <iframe\r\n      sandbox=\"allow-same-origin allow-scripts\"\r\n      scrolling=\"yes\"\r\n      width=\"100%\"\r\n      :srcdoc=\"html\"\r\n      class=\"iframe-box\"\r\n      id=\"iframe-box\"\r\n      frameborder=\"0\"\r\n    ></iframe>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $ from \"jquery\";\r\n\r\n$.fn.extend({\r\n  getCSSSelector: function() {\r\n    var path,\r\n      node = this;\r\n    while (node.length) {\r\n      var realNode = node[0],\r\n        name = realNode.localName;\r\n      var classes = $(realNode).attr(\"class\");\r\n      var cls = \"\";\r\n      if (classes) {\r\n        classes = classes.split(\" \");\r\n        for (let i = 0; i < classes.length; i++) {\r\n          if (classes[i]) {\r\n            cls += \".\" + classes[i];\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!name) break;\r\n      name = name.toLowerCase();\r\n\r\n      if (cls) {\r\n        name = name + cls;\r\n      }\r\n\r\n      var parent = node.parent();\r\n\r\n      var sameTagSiblings = parent.children(name);\r\n      if (sameTagSiblings.length > 1) {\r\n        var allSiblings = parent.children();\r\n        var index = allSiblings.index(realNode) + 1;\r\n        if (index > 1) {\r\n          name += \":nth-child(\" + index + \")\";\r\n        }\r\n      }\r\n\r\n      if (name !== \"html\" && name !== \"body\") {\r\n        path = name + (path ? \" > \" + path : \"\");\r\n      }\r\n      node = parent;\r\n    }\r\n    return path;\r\n  },\r\n  getXPathSelector: function() {\r\n    var path,\r\n      node = this;\r\n    if (node.id) return \"//*[@id='\" + node.id + \"']\";\r\n    var position,\r\n      $node = this.first(),\r\n      nodeName = $node.prop(\"nodeName\"),\r\n      $sibSameNameAndSelf = $node.siblings(nodeName).addBack(),\r\n      steps = [],\r\n      $parent = $node.parent(),\r\n      parentName = $parent.prop(\"nodeName\");\r\n\r\n    position =\r\n      $sibSameNameAndSelf.length > 1\r\n        ? \"[\" + ($sibSameNameAndSelf.index($node) + 1) + \"]\"\r\n        : \"\";\r\n    steps.push(nodeName + position);\r\n\r\n    while (\r\n      $parent.length == 1 &&\r\n      parentName !== node &&\r\n      parentName.toLowerCase() !== \"#document\" &&\r\n      parentName.toLowerCase() !== \"html\" &&\r\n      parentName.toLowerCase() !== \"body\"\r\n    ) {\r\n      $sibSameNameAndSelf = $parent.siblings(parentName).addBack();\r\n      position =\r\n        $sibSameNameAndSelf.length > 1\r\n          ? \"[\" + ($sibSameNameAndSelf.index($parent) + 1) + \"]\"\r\n          : \"\";\r\n      steps.push(parentName + position);\r\n      $parent = $parent.parent();\r\n      parentName = $parent.prop(\"nodeName\");\r\n    }\r\n    return (\r\n      \"//\" +\r\n      steps\r\n        .reverse()\r\n        .join(\"/\")\r\n        .toLowerCase()\r\n    );\r\n  },\r\n});\r\n\r\nfunction getCSSSelector(element) {\r\n  return $(element).getCSSSelector();\r\n}\r\n\r\nfunction getXPathSelector(element) {\r\n  return $(element).getXPathSelector();\r\n}\r\n\r\nexport default {\r\n  name: \"Web\",\r\n  data() {\r\n    return {\r\n      xpathSelector: null,\r\n      cssSelector: null,\r\n    };\r\n  },\r\n  props: {\r\n    html: {\r\n      type: String,\r\n    },\r\n  },\r\n  methods: {\r\n    onCopy: function() {\r\n      this.$message.success(this.$store.getters.$lang.messages.successCopy);\r\n    },\r\n    onError: function() {\r\n      this.$message.error(this.$store.getters.$lang.messages.errorCopy);\r\n    },\r\n  },\r\n  mounted() {\r\n    let that = this;\r\n    let iframe_id = \"iframe-box\";\r\n    $(\"#\" + iframe_id).on(\"load\", function() {\r\n      document.getElementById(\r\n        iframe_id\r\n      ).contentWindow.document.body.onclick = function(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let target = $(event.target);\r\n        console.log(getCSSSelector(target));\r\n        that.cssSelector = getCSSSelector(target);\r\n        that.xpathSelector = getXPathSelector(target);\r\n\r\n        $(document.getElementById(iframe_id).contentWindow.document.body)\r\n          .find(\".gerapy-selected\")\r\n          .remove();\r\n        $(document.getElementById(iframe_id).contentWindow.document.body)\r\n          .find(getCSSSelector(target))\r\n          .each(function() {\r\n            $(\"<div></div>\")\r\n              .css($(this).offset())\r\n              .css({\r\n                width: target.width(),\r\n                height: target.height(),\r\n                position: \"absolute\",\r\n                border: \"2px solid red\",\r\n                \"pointer-events\": \"none\",\r\n                \"z-index\": 10000,\r\n              })\r\n              .addClass(\"gerapy-selected\")\r\n              .appendTo(\r\n                $(\r\n                  document.getElementById(iframe_id).contentWindow.document.body\r\n                )\r\n              );\r\n          });\r\n      };\r\n    });\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\niframe html {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","\niframe html[data-v-0f01bba5] {\r\n  cursor: pointer;\n}\r\n\n#console{height:auto;border:1px solid #dfe6ec}#console p{margin-top:5px;margin-bottom:5px}#console p button{margin-right:5px}#console p a{color:#48576a;font-weight:400}#console label .el-button{width:100%}#follows #follow-requests,#follows #follow-items{border:1px solid #dfe6ec;overflow-y:scroll;max-height:400px}#follows #follow-requests .el-loading-mask,#follows #follow-items .el-loading-mask{height:10000px}#follows #follow-items .follow-item{border-bottom:1px solid #dfe6ec}#follows #follow-items .follow-item .key{width:10%}#follows #follow-items .follow-item .value{width:90%}#follows #follow-requests .follow-request{position:relative;height:40px;line-height:40px;padding-left:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;border-bottom:1px solid #dfe6ec}#follows #follow-web iframe{border:1px solid #dfe6ec;min-height:500px}#follows #follow-html{max-height:500px;overflow:scroll;border:1px solid #dfe6ec;padding:15px}.el-tabs__item.is-active{color:#28ccaa !important}.el-tabs__active-bar{background-color:#28ccaa !important}\n.code-editor{font-size:16px}.code-editor .CodeMirror{max-height:200px}.code-editor .CodeMirror-line{height:25px;line-height:25px !important}\n#project-configure #info .el-form,#project-configure #items .el-form,#project-configure #spiders .el-form{padding:20px 30px}#project-configure #info .el-form .el-form-item{margin-bottom:0}.inline{display:inline-block}.inline.short{max-width:100px !important}.inline.medium{max-width:200px !important}.inline.long{max-width:400px !important}#save{position:fixed;width:40px;height:40px;border-radius:50%;right:20px;bottom:20px;z-index:1000;font-size:12px;padding-left:15px}\n\n/*# sourceMappingURL=chunk-582dc9b0.5d448111.css.map*/","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#console {\r\n  height: auto;\r\n  border: 1px solid rgb(223, 230, 236);\r\n  p {\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n    button {\r\n      margin-right: 5px;\r\n    }\r\n    a {\r\n      color: rgb(72, 87, 106);\r\n      font-weight: 400;\r\n    }\r\n  }\r\n  label {\r\n    .el-button {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n\r\n#follows {\r\n  $max-height: 400px;\r\n  #follow-requests,\r\n  #follow-items {\r\n    border: 1px solid rgb(223, 230, 236);\r\n    overflow-y: scroll;\r\n    max-height: $max-height;\r\n    .el-loading-mask {\r\n      height: 10000px;\r\n    }\r\n  }\r\n  #follow-items {\r\n    .follow-item {\r\n      border-bottom: 1px solid rgb(223, 230, 236);\r\n      .key {\r\n        width: 10%;\r\n      }\r\n      .value {\r\n        width: 90%;\r\n      }\r\n    }\r\n  }\r\n  #follow-requests {\r\n    .follow-request {\r\n      position: relative;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      padding-left: 5px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      cursor: pointer;\r\n      border-bottom: 1px solid rgb(223, 230, 236);\r\n    }\r\n  }\r\n\r\n  #follow-web {\r\n    iframe {\r\n      border: 1px solid #dfe6ec;\r\n      min-height: 500px;\r\n    }\r\n  }\r\n\r\n  #follow-html {\r\n    max-height: 500px;\r\n    overflow: scroll;\r\n    border: 1px solid #dfe6ec;\r\n    padding: 15px;\r\n  }\r\n}\r\n\r\n.el-tabs__item.is-active {\r\n  color: #28ccaa !important;\r\n}\r\n\r\n.el-tabs__active-bar {\r\n  background-color: #28ccaa !important;\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n$line-height: 25px;\r\n.code-editor {\r\n  font-size: 16px;\r\n  .CodeMirror {\r\n    max-height: 200px;\r\n  }\r\n  .CodeMirror-line {\r\n    height: $line-height;\r\n    line-height: $line-height !important;\r\n  }\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#project-configure {\r\n  #info,\r\n  #items,\r\n  #spiders {\r\n    .el-form {\r\n      padding: 20px 30px;\r\n    }\r\n  }\r\n  #info {\r\n    .el-form {\r\n      .el-form-item {\r\n        margin-bottom: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.inline {\r\n  display: inline-block;\r\n  &.short {\r\n    max-width: 100px !important;\r\n  }\r\n  &.medium {\r\n    max-width: 200px !important;\r\n  }\r\n  &.long {\r\n    max-width: 400px !important;\r\n  }\r\n}\r\n\r\n#save {\r\n  position: fixed;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  right: 20px;\r\n  bottom: 20px;\r\n  z-index: 1000;\r\n  font-size: 12px;\r\n  padding-left: 15px;\r\n}\r\n"]}