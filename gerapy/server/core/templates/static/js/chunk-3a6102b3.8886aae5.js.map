{"version":3,"sources":["webpack:///./src/views/project/Deploy.vue?b2e9","webpack:///./src/components/BottomBar.vue?0034","webpack:///src/components/BottomBar.vue","webpack:///./src/components/BottomBar.vue?a637","webpack:///./src/components/BottomBar.vue","webpack:///src/views/project/Deploy.vue","webpack:///./src/views/project/Deploy.vue?d5e9","webpack:///./src/views/project/Deploy.vue","webpack:///./src/components/PanelTitle.vue?6395","webpack:///src/components/PanelTitle.vue","webpack:///./src/components/PanelTitle.vue?1762","webpack:///./src/components/PanelTitle.vue","webpack:///./src/views/project/Deploy.vue?9598"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","$lang","titles","deployProject","directives","name","rawName","value","expression","style","width","clients","messages","loading","on","onBatchSelect","columns","status","scopedSlots","_u","key","fn","props","statusClass","clientsStatus","row","pk","_v","_s","statusText","id","ip","port","description","projectDescriptions","deployedAt","projectDateTimes","operations","$event","onDeploy","buttons","deploy","_e","handler","batchSelect","length","onBatchDeploy","batchDeploy","objects","project","buildInfo","packageName","egg","notBuildText","builtAt","built_at","buildProject","ref","rules","model","callback","$$v","$set","onBuild","re","build","staticRenderFns","_t","component","data","projectName","required","message","trigger","components","PanelTitle","BottomBar","created","methods","console","getBuildInfo","get","then","_this","catch","getClientStatus","_this2","getClientData","_this3","post","_this4","getProjectVersion","_this5","confirmButtonText","cancelButtonText","type","_this6","_this7","domProps","title"],"mappings":"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","file":"static/js/chunk-3a6102b3.8886aae5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"panel\"},[_c('panel-title',{attrs:{\"title\":_vm.$lang.titles.deployProject}}),_c('div',{staticClass:\"panel-body\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],style:({ width: '100%' }),attrs:{\"data\":_vm.clients,\"element-loading-text\":_vm.$lang.messages.loading},on:{\"selection-change\":_vm.onBatchSelect}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":_vm.$lang.columns.status,\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-button',{attrs:{\"type\":_vm.statusClass[_vm.clientsStatus[props.row.pk]],\"size\":\"mini\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.statusText[_vm.clientsStatus[props.row.pk]])+\"\\n                \")])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"pk\",\"label\":_vm.$lang.columns.id,\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"fields.name\",\"label\":_vm.$lang.columns.name,\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"fields.ip\",\"label\":_vm.$lang.columns.ip,\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"fields.port\",\"label\":_vm.$lang.columns.port,\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":_vm.$lang.columns.description},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('span',[_vm._v(_vm._s(_vm.projectDescriptions[props.row.pk]))])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":_vm.$lang.columns.deployedAt},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('span',[_vm._v(_vm._s(_vm.projectDateTimes[props.row.pk]))])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":_vm.$lang.columns.operations},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [(_vm.clientsStatus[props.row.pk])?_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.onDeploy(props.row.pk)}}},[_c('i',{staticClass:\"fa fa-cloud-upload\"}),_vm._v(\"\\n                  \"+_vm._s(_vm.$lang.buttons.deploy)+\"\\n                \")]):_vm._e()]}}])})],1),_c('bottom-bar',{scopedSlots:_vm._u([{key:\"handler\",fn:function(handler){return _c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":_vm.batchSelect.length === 0},on:{\"click\":_vm.onBatchDeploy}},[_c('span',[_c('i',{staticClass:\"fa fa-cloud-upload\"}),_vm._v(\"\\n                \"+_vm._s(_vm.$lang.buttons.batchDeploy)+\"\\n              \")])])}}])})],1)],1)])],1),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"panel\"},[_c('panel-title',{attrs:{\"title\":_vm.$lang.objects.project}}),_c('div',{staticClass:\"panel-body\"},[_c('el-form',{attrs:{\"model\":_vm.buildInfo,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$lang.columns.name}},[_vm._v(\"\\n              \"+_vm._s(_vm.buildInfo.name)+\"\\n            \")]),_c('el-form-item',{attrs:{\"label\":_vm.$lang.columns.packageName}},[_vm._v(\"\\n              \"+_vm._s(_vm.buildInfo.egg || _vm.notBuildText)+\"\\n            \")]),_c('el-form-item',{attrs:{\"label\":_vm.$lang.columns.builtAt}},[_vm._v(\"\\n              \"+_vm._s(_vm.buildInfo.built_at || _vm.notBuildText)+\"\\n            \")])],1)],1)],1)]),_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"panel\"},[_c('panel-title',{attrs:{\"title\":_vm.$lang.titles.buildProject}}),_c('div',{staticClass:\"panel-body\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.buildInfo,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$lang.columns.name}},[_vm._v(\"\\n              \"+_vm._s(_vm.buildInfo.name)+\"\\n            \")]),_c('el-form-item',{staticClass:\"description\",attrs:{\"label\":_vm.$lang.columns.description,\"prop\":\"description\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.buildInfo.description),callback:function ($$v) {_vm.$set(_vm.buildInfo, \"description\", $$v)},expression:\"buildInfo.description\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onBuild}},[_c('i',{staticClass:\"fa fa-codepen\"}),(_vm.buildInfo.egg)?_c('span',[_vm._v(\" \"+_vm._s(_vm.$lang.buttons.re))]):_vm._e(),_vm._v(_vm._s(_vm.$lang.buttons.build)+\"\\n              \")])],1)],1)],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bottom-toolbar ofh\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"fl\"},[_vm._t(\"handler\")],2),_c('div',{staticClass:\"fr\"},[_vm._t(\"page\")],2)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"bottom-toolbar ofh\">\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <div class=\"fl\">\r\n          <slot name=\"handler\"></slot>\r\n        </div>\r\n        <div class=\"fr\">\r\n          <slot name=\"page\"></slot>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BottomBar\",\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BottomBar.vue?vue&type=template&id=f076c942&\"\nimport script from \"./BottomBar.vue?vue&type=script&lang=js&\"\nexport * from \"./BottomBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <div class=\"panel\">\r\n          <panel-title :title=\"$lang.titles.deployProject\"> </panel-title>\r\n          <div class=\"panel-body\">\r\n            <el-table\r\n              :data=\"clients\"\r\n              v-loading=\"loading\"\r\n              :element-loading-text=\"$lang.messages.loading\"\r\n              @selection-change=\"onBatchSelect\"\r\n              :style=\"{ width: '100%' }\"\r\n            >\r\n              <el-table-column align=\"center\" type=\"selection\" width=\"55\">\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                :label=\"$lang.columns.status\"\r\n                width=\"100\"\r\n              >\r\n                <template slot-scope=\"props\">\r\n                  <el-button\r\n                    :type=\"statusClass[clientsStatus[props.row.pk]]\"\r\n                    size=\"mini\"\r\n                  >\r\n                    {{ statusText[clientsStatus[props.row.pk]] }}\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                prop=\"pk\"\r\n                :label=\"$lang.columns.id\"\r\n                width=\"60\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                prop=\"fields.name\"\r\n                :label=\"$lang.columns.name\"\r\n                width=\"100\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                prop=\"fields.ip\"\r\n                :label=\"$lang.columns.ip\"\r\n                width=\"150\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                prop=\"fields.port\"\r\n                :label=\"$lang.columns.port\"\r\n                width=\"100\"\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                :label=\"$lang.columns.description\"\r\n              >\r\n                <template slot-scope=\"props\">\r\n                  <span>{{ projectDescriptions[props.row.pk] }}</span>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column align=\"center\" :label=\"$lang.columns.deployedAt\">\r\n                <template slot-scope=\"props\">\r\n                  <span>{{ projectDateTimes[props.row.pk] }}</span>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column align=\"center\" :label=\"$lang.columns.operations\">\r\n                <template slot-scope=\"props\">\r\n                  <el-button\r\n                    type=\"success\"\r\n                    size=\"mini\"\r\n                    @click=\"onDeploy(props.row.pk)\"\r\n                    v-if=\"clientsStatus[props.row.pk]\"\r\n                  >\r\n                    <i class=\"fa fa-cloud-upload\"></i>\r\n                    {{ $lang.buttons.deploy }}\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <bottom-bar>\r\n              <el-button\r\n                slot=\"handler\"\r\n                type=\"primary\"\r\n                size=\"mini\"\r\n                :disabled=\"batchSelect.length === 0\"\r\n                @click=\"onBatchDeploy\"\r\n                slot-scope=\"handler\"\r\n              >\r\n                <span>\r\n                  <i class=\"fa fa-cloud-upload\"></i>\r\n                  {{ $lang.buttons.batchDeploy }}\r\n                </span>\r\n              </el-button>\r\n            </bottom-bar>\r\n          </div>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\">\r\n        <div class=\"panel\">\r\n          <panel-title :title=\"$lang.objects.project\"> </panel-title>\r\n          <div class=\"panel-body\">\r\n            <el-form :model=\"buildInfo\" label-width=\"120px\">\r\n              <el-form-item :label=\"$lang.columns.name\">\r\n                {{ buildInfo.name }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$lang.columns.packageName\">\r\n                {{ buildInfo.egg || notBuildText }}\r\n              </el-form-item>\r\n              <el-form-item :label=\"$lang.columns.builtAt\">\r\n                {{ buildInfo.built_at || notBuildText }}\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <div class=\"panel\">\r\n          <panel-title :title=\"$lang.titles.buildProject\"> </panel-title>\r\n          <div class=\"panel-body\">\r\n            <el-form\r\n              ref=\"form\"\r\n              :model=\"buildInfo\"\r\n              :rules=\"rules\"\r\n              label-width=\"120px\"\r\n            >\r\n              <el-form-item :label=\"$lang.columns.name\">\r\n                {{ buildInfo.name }}\r\n              </el-form-item>\r\n              <el-form-item\r\n                :label=\"$lang.columns.description\"\r\n                prop=\"description\"\r\n                class=\"description\"\r\n              >\r\n                <el-input\r\n                  v-model=\"buildInfo.description\"\r\n                  size=\"small\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" size=\"small\" @click=\"onBuild\">\r\n                  <i class=\"fa fa-codepen\"></i> \r\n                  <span v-if=\"buildInfo.egg\"> {{ $lang.buttons.re }}</span>{{ $lang.buttons.build }}\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nimport PanelTitle from \"../../components/PanelTitle\";\r\nimport BottomBar from \"../../components/BottomBar\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      buildInfo: {},\r\n      notBuildText: this.$store.getters.$lang.messages.notBuilt,\r\n      clients: [],\r\n      loading: false,\r\n      projectName: this.$route.params.name,\r\n      batchSelect: [],\r\n      projectDescriptions: {},\r\n      projectDateTimes: {},\r\n      clientsStatus: {},\r\n      statusClass: {\r\n        \"1\": \"success\",\r\n        \"0\": \"warning\",\r\n        \"-1\": \"danger\",\r\n      },\r\n      statusText: {\r\n        \"1\": this.$store.getters.$lang.buttons.normal,\r\n        \"0\": this.$store.getters.$lang.buttons.connecting,\r\n        \"-1\": this.$store.getters.$lang.buttons.error,\r\n      },\r\n      rules: {\r\n        description: [\r\n          {\r\n            required: true,\r\n            message: this.$store.getters.$lang.messages.emptyDescription,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    PanelTitle,\r\n    BottomBar,\r\n  },\r\n  created() {\r\n    this.getClientData();\r\n    this.getBuildInfo();\r\n  },\r\n  methods: {\r\n    onBatchSelect(val) {\r\n      this.batchSelect = val;\r\n      console.log(this.batchSelect);\r\n    },\r\n    getBuildInfo() {\r\n      this.loading = true;\r\n      this.$http\r\n        .get(\r\n          this.formatString(this.$store.state.url.project.build, {\r\n            name: this.projectName,\r\n          })\r\n        )\r\n        .then(({ data: data }) => {\r\n          this.buildInfo = data;\r\n          console.log(data);\r\n          this.loading = false;\r\n        })\r\n        .catch(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    getClientStatus(id) {\r\n      this.$set(this.clientsStatus, id, 0);\r\n      this.$http\r\n        .get(\r\n          this.formatString(this.$store.state.url.client.status, {\r\n            id: id,\r\n          })\r\n        )\r\n        .then(({ data: { result: data } }) => {\r\n          this.$set(this.clientsStatus, id, data);\r\n        })\r\n        .catch(() => {\r\n          this.$set(this.clientsStatus, id, -1);\r\n        });\r\n    },\r\n    getClientData() {\r\n      this.loading = true;\r\n      this.$http\r\n        .get(this.$store.state.url.client.index)\r\n        .then(({ data: clients }) => {\r\n          this.clients = clients;\r\n          this.loading = false;\r\n          this.clients.forEach(({ pk: id }) => {\r\n            this.getProjectVersion(id);\r\n            this.getClientStatus(id);\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    deploy(id) {\r\n      if (this.clientsStatus[id]) {\r\n        this.$http\r\n          .post(\r\n            this.formatString(this.$store.state.url.client.projectDeploy, {\r\n              id: id,\r\n              name: this.projectName,\r\n            })\r\n          )\r\n          .then(() => {\r\n            this.$message.success(\r\n              this.$store.getters.$lang.titles.client +\r\n                \" \" +\r\n                id +\r\n                \" \" +\r\n                this.$store.getters.$lang.messages.successDeploy\r\n            );\r\n            this.getProjectVersion(id);\r\n            this.loading = false;\r\n          })\r\n          .catch(() => {\r\n            this.$message.error(\r\n              this.$store.getters.$lang.titles.client +\r\n                \" \" +\r\n                id +\r\n                \" \" +\r\n                this.$store.getters.$lang.messages.errorDeploy\r\n            );\r\n            this.loading = false;\r\n          });\r\n      } else {\r\n        this.$message.error(\r\n          this.$store.getters.$lang.titles.client +\r\n            \" \" +\r\n            id +\r\n            \" \" +\r\n            this.$store.getters.$lang.messages.errorDeploy\r\n        );\r\n        this.loading = false;\r\n      }\r\n    },\r\n    getProjectVersion(id) {\r\n      this.loading = true;\r\n      this.$http\r\n        .get(\r\n          this.formatString(this.$store.state.url.client.projectVersion, {\r\n            id: id,\r\n            name: this.projectName,\r\n          })\r\n        )\r\n        .then(({ data: version }) => {\r\n          this.$set(this.projectDescriptions, id, version[\"description\"]);\r\n          this.$set(this.projectDateTimes, id, version[\"deployed_at\"]);\r\n          this.loading = false;\r\n        })\r\n        .catch(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    onBatchDeploy() {\r\n      this.$confirm(\r\n        this.$store.getters.$lang.messages.confirm,\r\n        this.$store.getters.$lang.buttons.confirm,\r\n        {\r\n          confirmButtonText: this.$store.getters.$lang.buttons.yes,\r\n          cancelButtonText: this.$store.getters.$lang.buttons.no,\r\n          type: \"warning\",\r\n        }\r\n      )\r\n        .then(() => {\r\n          this.loading = true;\r\n          console.log(this.batchSelect);\r\n          this.batchSelect.forEach(({ pk: id }) => {\r\n            this.deploy(id);\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message.error(this.$store.getters.$lang.messages.errorDeploy);\r\n        });\r\n    },\r\n    onDeploy(id) {\r\n      if (this.buildInfo.egg) {\r\n        this.deploy(id);\r\n      } else {\r\n        this.$message.error(this.$store.getters.$lang.messages.buildFirst);\r\n      }\r\n    },\r\n    onBuild() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (!valid) return false;\r\n        this.$http\r\n          .post(\r\n            this.formatString(this.$store.state.url.project.build, {\r\n              name: this.projectName,\r\n            }),\r\n            {\r\n              description: this.buildInfo[\"description\"],\r\n              egg: this.buildInfo[\"egg\"],\r\n              built_at: this.buildInfo[\"built_at\"],\r\n            }\r\n          )\r\n          .then(({ data: data }) => {\r\n            this.buildInfo = data;\r\n            console.log(data);\r\n            this.loading = false;\r\n            this.$message.success(\r\n              this.$store.getters.$lang.messages.successBuild\r\n            );\r\n          })\r\n          .catch(() => {\r\n            this.loading = false;\r\n            this.$message.error(this.$store.getters.$lang.messages.errorBuild);\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.description input {\r\n  max-width: 200px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Deploy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Deploy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Deploy.vue?vue&type=template&id=4e0bbc23&\"\nimport script from \"./Deploy.vue?vue&type=script&lang=js&\"\nexport * from \"./Deploy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Deploy.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel-title\"},[(_vm.title)?_c('span',{domProps:{\"textContent\":_vm._s(_vm.title)}}):_vm._e(),_c('div',{staticClass:\"fr\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"panel-title\">\r\n    <span v-if=\"title\" v-text=\"title\"></span>\r\n    <div class=\"fr\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"PanelTitle\",\r\n  props: {\r\n    title: {\r\n      type: String,\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PanelTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PanelTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PanelTitle.vue?vue&type=template&id=470d15d1&\"\nimport script from \"./PanelTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./PanelTitle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Deploy.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}